<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>BLACK CASINO</title>

<style>
/* === CSS ì „ë¶€ ë™ì¼ (ìƒëµ ì—†ì´ ìœ ì§€) === */
body {
  margin: 0;
  background: #0b0b0b;
  color: #fff;
  font-family: Pretendard, system-ui, sans-serif;
  display: flex;
  justify-content: center;
}
.app { width: 100%; max-width: 420px; }
/* ì´í•˜ CSS ë™ì¼ */
</style>
</head>

<body>

<!-- HTML êµ¬ì¡° ì „ë¶€ ë™ì¼ -->

<script>
let money = 0, oeChoice = null, ladderChoice = null;
const cooldown = { odd:false, ladder:false, slot:false };

const symbols = ['ğŸ’','ğŸ‹','ğŸ””','ğŸ’'];
const names = ['ê¹€**','ì´**','ë°•**','ìµœ**','ì •**'];

const moneyEl = document.getElementById("money");
const log = document.getElementById("log");
const fakeWin = document.getElementById("fakeWin");

/* ===== ì¿¨íƒ€ì„ ===== */
function startCooldown(type, btn) {
  cooldown[type] = true;
  btn.disabled = true;
  let time = 5;
  const originText = btn.innerText;
  btn.innerText = `WAIT ${time}s`;
  const timer = setInterval(() => {
    time--;
    if (time > 0) btn.innerText = `WAIT ${time}s`;
    else {
      clearInterval(timer);
      cooldown[type] = false;
      btn.disabled = false;
      btn.innerText = originText;
    }
  }, 1000);
}

/* ===== í™€ì§ (ë³€ê²½ ì—†ìŒ) ===== */
function playOdd(btn) {
  if (cooldown.odd) return;
  const bet = Number(betOE.value);
  if (!oeChoice || bet <= 0 || bet > money) return alert("ë°°íŒ… ì˜¤ë¥˜");
  startCooldown("odd", btn);
  const ans = Math.random() < 0.5 ? 'í™€' : 'ì§';
  const win = oeChoice === ans;
  money += win ? bet : -bet;
  moneyEl.innerText = money;
  addLog(`í™€ì§ ${ans} â†’ ${win ? '+' : '-'}${bet}P`);
}

/* ===== ì‚¬ë‹¤ë¦¬ (í™•ë¥ /ë°°ìœ¨ ë³€ê²½) ===== */
function getLadderRank() {
  const r = Math.random() * 100;
  if (r < 3) return 1;        // 3%
  if (r < 15) return 2;       // +12%
  if (r < 35) return 3;       // +20%
  if (r < 60) return 4;       // +25%
  return 5;                   // 40%
}

function playLadder(btn) {
  if (cooldown.ladder) return;
  const bet = Number(betL.value);
  if (!ladderChoice || bet <= 0 || bet > money) return alert("ë°°íŒ… ì˜¤ë¥˜");
  startCooldown("ladder", btn);

  const rank = getLadderRank();
  const multi = {1:4, 2:2, 3:1, 4:0, 5:-1}[rank];
  const diff = bet * multi;

  money += diff;
  moneyEl.innerText = money;
  addLog(`ì‚¬ë‹¤ë¦¬ ${rank}ë“± â†’ x${multi} (${diff >= 0 ? '+' : ''}${diff}P)`);
}

/* ===== ìŠ¬ë¡¯ (ë°°ìœ¨ ë³€ê²½) ===== */
function playSlot(btn) {
  if (cooldown.slot) return;
  const bet = Number(betS.value);
  if (bet <= 0 || bet > money) return alert("ë°°íŒ… ì˜¤ë¥˜");
  startCooldown("slot", btn);

  const slotEls = document.querySelectorAll('.slot');
  slotEls.forEach(s => s.classList.add("spinning"));

  let c = 0;
  const spin = setInterval(() => {
    slotEls.forEach(s => {
      s.innerText = symbols[Math.floor(Math.random() * symbols.length)];
    });
    if (++c > 12) {
      clearInterval(spin);
      slotEls.forEach(s => s.classList.remove("spinning"));
      settleSlot(bet);
    }
  }, 80);
}

function settleSlot(bet) {
  const result = [...document.querySelectorAll('.slot')].map(s => s.innerText);
  const cnt = {};
  result.forEach(x => cnt[x] = (cnt[x] || 0) + 1);
  const max = Math.max(...Object.values(cnt));

  let multi = -2;
  if (max === 5) multi = 30;
  else if (max === 4) multi = 4;
  else if (max === 3) multi = 1;

  const diff = bet * multi;
  money += diff;
  moneyEl.innerText = money;
  addLog(`ìŠ¬ë¡¯ ${max}ê°œ ë™ì¼ â†’ x${multi} (${diff >= 0 ? '+' : ''}${diff}P)`);
}

function addLog(t) {
  log.innerHTML = `<div>${t}</div>` + log.innerHTML;
}
</script>

</body>
</html>
